<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - e-Rapor Cerdas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
    /* 1. Sembunyikan SEMUA halaman konten secara default */
    .content-page {
        display: none;
    }

    /* 2. Tampilkan HANYA halaman yang memiliki kelas .active */
    .content-page.active {
        display: block;
    }
</style>
</head>
<body>

    <div id="notification-toast" class="notification-toast" style="display: none;">
        <span id="notification-toast-message">Ini adalah notifikasi.</span>
        <button id="notification-toast-close" class="notification-toast-close">&times;</button>
    </div>

    <div class="d-flex" id="wrapper">

        <div class="bg-dark border-right" id="sidebar-wrapper">
            <div class="sidebar-heading text-white text-center">
            <img src="assets/logo.png" alt="Logo Sekolah" style="width: 80px; margin-bottom: 10px;"> 
            <h4>e-Rapor Cerdas</h4>
            <h5 id="sidebar-school-name" class="text-white-50">[Nama Sekolah]</h5>
        </div>
            <div class="list-group list-group-flush">
                <a href="#" class="list-group-item list-group-item-action bg-dark text-white nav-link active" data-page="page-home">
                    <i class="fas fa-home me-2"></i>Dashboard
                </a>
                <a href="#" class="list-group-item list-group-item-action bg-dark text-white nav-link" data-page="page-profil-sekolah">
                <i class="fas fa-school me-2"></i>Profil Sekolah
                </a>
                <a href="#" class="list-group-item list-group-item-action bg-dark text-white nav-link" data-page="page-input-nilai">
                    <i class="fas fa-edit me-2"></i>Input Nilai CP
                </a>
                <a href="#" class="list-group-item list-group-item-action bg-dark text-white nav-link" data-page="page-data-siswa">
                    <i class="fas fa-users me-2"></i>Data Siswa
                </a>
                <a href="#" class="list-group-item list-group-item-action bg-dark text-white nav-link" data-page="page-cetak-rapor">
                    <i class="fas fa-print me-2"></i>Cetak Rapor
                </a>
                </div>
        </div>
        <div id="page-content-wrapper">

            <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
                <div class="container-fluid">
                    <div class="ms-auto d-flex align-items-center">
                        <span id="welcome-message" class="navbar-text me-3">
                            Selamat Datang...
                        </span>
                        <button id="logout-button" class="btn btn-danger btn-sm">Logout</button>
                    </div>
                </div>
            </nav>

            <div class="container-fluid p-4">

                <div class="content-page active" id="page-home">
                    <h1 class="mb-4">Dashboard Utama</h1>
                    
                    <div class="row">
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card shadow-sm h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Siswa Terdaftar</h5>
                                    <p class="card-text fs-3" id="stat-jumlah-siswa"> memuat... </p>
                                    <p class="card-text text-muted">Total siswa di sekolah Anda.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card shadow-sm h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Mapel Diajarkan</h5>
                                    <p class="card-text fs-3" id="stat-jumlah-mapel"> memuat... </p>
                                    <p class="card-text text-muted">Mapel yang Anda ampu.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card shadow-sm h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Rapor Selesai (Semester Ini)</h5>
                                    <p class="card-text fs-3" id="stat-rapor-selesai"> memuat... </p>
                                    <p class="card-text text-muted">Persentase nilai yang sudah diinput.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr class="my-4">

                    <h2>Akses Cepat</h2>
                    <div class="list-group">
                        <a href="#" class="list-group-item list-group-item-action nav-link" data-page="page-input-nilai">
                            <strong>Input Nilai CP</strong><br>
                            <small>Mulai menilai capaian pembelajaran siswa per mata pelajaran.</small>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action nav-link" data-page="page-data-siswa">
                            <strong>Data Siswa</strong><br>
                            <small>Kelola dan impor data siswa Anda.</small>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action nav-link" data-page="page-cetak-rapor">
                            <strong>Cetak Rapor</strong><br>
                            <small>Unduh dan cetak rapor yang sudah selesai.</small>
                        </a>
                    </div>
                </div>

                <div class="content-page" id="page-input-nilai">
                    <h1 class="mb-4">Input Nilai Capaian Pembelajaran (CP)</h1>
                    
                    <form id="form-input-nilai">
                        <div class="row g-3">
                            <div class="col-lg-6">
                                <div class="card shadow-sm">
                                    <div class="card-header">
                                        Filter Siswa
                                    </div>
                                    <div class="card-body">
                                        <div class="form-group mb-3">
                                            <label for="pilih-kelas" class="form-label">Pilih Kelas:</label>
                                            <select id="pilih-kelas" class="form-select" disabled>
                                                <option value="">Memuat data...</option>
                                            </select>
                                        </div>
                                        <div class="form-group mb-3">
                                            <label for="pilih-siswa" class="form-label">Pilih Siswa:</label>
                                            <select id="pilih-siswa" class="form-select" disabled>
                                                <option value="">Pilih kelas dahulu...</option>
                                            </select>
                                        </div>
                                        <div class="form-group mb-3">
                                            <label for="pilih-mapel" class="form-label">Pilih Mata Pelajaran:</label>
                                            <select id="pilih-mapel" class="form-select" disabled>
                                                <option value="">Memuat data...</option>
                                            </select>
                                        </div>
                                        <div class="form-group mb-3">
                                            <label for="pilih-agama" class="form-label">Pilih Agama (jika PAI):</label>
                                            <select id="pilih-agama" class="form-select" disabled>
                                                <option value="">Pilih mapel dahulu...</option>
                                            </select>
                                        </div>

                                        <div class="form-group mb-3">
                                            <label for="pilih-tahun-ajaran" class="form-label">Tahun Ajaran:</label>
                                            <input type="text" id="pilih-tahun-ajaran" class="form-control" placeholder="Contoh: 2024/2025">
                                        </div>
                                        <div class="form-group mb-3">
                                            <label for="pilih-semester" class="form-label">Semester:</label>
                                            <select id="pilih-semester" class="form-select">
                                                <option value="">Pilih Semester...</option>
                                                <option value="Ganjil">Ganjil</option>
                                                <option value="Genap">Genap</option>
                                            </select>
                                        </div>
                                        </div>
                                </div>
                                <div class="card shadow-sm mt-4">
                                    <div class="card-header">
                                        Pilih Capaian Pembelajaran (CP) yang Dinilai
                                        <span id="mulok-indicator" class="badge bg-warning ms-2" style="display: none;">Mode Mulok</span>
                                    </div>
                                    <div class="card-body" id="cp-selection-list">
                                        <p style="color: #6c757d;"><i>Pilih kelas, mapel, & agama...</i></p>
                                        </div>
                                </div>
                            </div>

                            <div class="col-lg-6">
                                <div class="card shadow-sm">
                                    <div class="card-header">
                                        Deskripsi Rapor & Nilai Akhir
                                    </div>
                                    <div class="card-body">
                                        <div class="form-group mb-3">
                                            <label for="kalimat-pembuka-tercapai" class="form-label">Kalimat Pembuka (Tercapai):</label>
                                            <select id="kalimat-pembuka-tercapai" class="form-select mb-2">
                                                <option value="custom">-- Tulis Manual --</option>
                                            </select>
                                            <input type="text" id="custom-pembuka-tercapai" class="form-control" placeholder="Tulis kalimat pembuka manual..." style="display: none;">
                                        </div>
                                        <div class="form-group mb-3">
                                            <label for="kalimat-pembuka-bimbingan" class="form-label">Kalimat Pembuka (Perlu Bimbingan):</label>
                                            <select id="kalimat-pembuka-bimbingan" class="form-select mb-2">
                                                <option value="custom">-- Tulis Manual --</option>
                                            </select>
                                            <input type="text" id="custom-pembuka-bimbingan" class="form-control" placeholder="Tulis kalimat pembuka manual..." style="display: none;">
                                        </div>
                                        <div class="form-group mb-3">
                                            <label for="final-description-input" class="form-label">Deskripsi Final Rapor:</label>
                                            <textarea id="final-description-input" class="form-control" rows="8" placeholder="Deskripsi akan dibuat otomatis..." readonly></textarea>
                                            <button id="edit-deskripsi-btn" class="btn btn-secondary btn-sm mt-2" style="display: none;">Edit Manual</button>
                                        </div>
                                        
                                        <hr>

                                        <div class="form-group mb-3">
                                            <label for="nilai-akhir-input" class="form-label fw-bold">Nilai Akhir (Angka):</label>
                                            <input type="number" id="nilai-akhir-input" class="form-control" min="0" max="100" placeholder="0-100">
                                        </div>
                                        
                                        <button id="simpan-nilai-btn" class="btn btn-primary w-100" disabled>
                                            Simpan Nilai & Deskripsi
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="content-page" id="page-data-siswa">
                    <h1 class="mb-4">Kelola Data Siswa</h1>
                    
                    <div class="card shadow-sm">
                        <div class="card-header">
                            Impor Data Siswa
                        </div>
                        <div class="card-body">
                            <p>Impor siswa baru atau perbarui data siswa yang ada menggunakan template CSV.</p>
                            <button id="download-template-btn" class="btn btn-success">
                                <i class="fas fa-download me-2"></i>Unduh Template CSV
                            </button>
                            <button id="import-csv-btn" class="btn btn-primary">
                                <i class="fas fa-upload me-2"></i>Impor CSV
                            </button>
                            <input type="file" id="csv-file-input" accept=".csv" style="display: none;">
                        </div>
                    </div>

                    <div class="card shadow-sm mt-4">
                        <div class="card-header">
                            Daftar Siswa Terdaftar
                        </div>
                        <div class="card-body">
                            <div class="data-table-container">
                                <table class="table table-striped table-hover">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>NISN</th>
                                            <th>Nama Siswa</th>
                                            <th>Kelas</th>
                                            <th>Tanggal Lahir</th>
                                            <th>Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody id="siswa-table-body">
                                        <tr>
                                            <td colspan="5" class="text-center">Memuat data...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <button id="toggle-siswa-list" class="btn btn-outline-secondary mt-2" style="display: none;">Tampilkan Semua Siswa</button>
                        </div>
                    </div>
                </div>
                
                <div class="content-page" id="page-cetak-rapor">
                    <h1 class="mb-4">Cetak Rapor</h1>
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <p>Fitur cetak rapor akan tersedia di sini.</p>
                            </div>
                    </div>
                </div>

            </div>
        </div>
        </div>
    <footer class="footer mt-auto py-3 bg-light border-top" style="width: 100%;">
        <div class="container-fluid text-center">
            <span class="text-muted">Dikembangkan oleh : Dedi Agus Mustofa, S.Pd.SD - 2025</span>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="dashboard.js"></script>
</body>
</html>
